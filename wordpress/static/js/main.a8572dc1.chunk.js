(this.webpackJsonpdfa=this.webpackJsonpdfa||[]).push([[0],{392:function(e,t,n){},403:function(e,t){},405:function(e,t){},415:function(e,t){},417:function(e,t){},444:function(e,t){},445:function(e,t){},450:function(e,t){},452:function(e,t){},459:function(e,t){},478:function(e,t){},722:function(e,t,n){"use strict";n.r(t);var a,r,s,c=n(10),i=n(11),l=n(21),o=n(25),u=n(376),j=n(0),d=n.n(j),b=n(56),p=n.n(b),g=(n(391),n(392),n(26)),m=n(23),h=n(22),O=n(2),x=Object(j.createContext)(),f=function(e){var t=Object(j.useState)(e.store||{}),n=Object(h.a)(t,2),a=n[0],r=n[1];return Object(O.jsxs)(x.Provider,{value:[a,r],children:[" ",e.children," "]})},v=function(e,t){var n=Object(j.useContext)(x),a=Object(h.a)(n,2),r=a[0],s=a[1];return e&&void 0!==t&&(r[e]=t),[e?r[e]:r,function(t){return s(Object(m.a)(Object(m.a)({},r),{},Object(g.a)({},e,t)))}]},y=n(36),w=function(e){var t=Object(j.useState)([]),n=Object(h.a)(t,2),r=n[0],s=n[1];return a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=p.a.createPortal(d.a.createElement(t,n),e),s([].concat(Object(y.a)(r),[t]))},r},k=n(20),C=n.n(k);!function(e){e[e.DEV=0]="DEV",e[e.PROD_DABL=1]="PROD_DABL",e[e.PROD_OTHER=2]="PROD_OTHER"}(s||(s={}));var S=window.location.hostname.endsWith(".daml.app")?s.PROD_DABL:s.PROD_OTHER,R=S===s.PROD_DABL?window.location.hostname.split(".")[0]:null!==(r="dfa-sandbox")?r:"dfa-sandbox",N=S===s.PROD_DABL?"https://api.projectdabl.com/data/".concat(R,"/"):void 0,q=n(357);var I=function(e){var t=function(e){var t={"https://daml.com/ledger-api":{ledgerId:R,applicationId:"dfa",actAs:[e]}};return Object(q.encode)(t,"secret","HS256")}(e);return{party:e,token:t,ledgerId:R}};function U(e){var t=JSON.parse(sessionStorage.getItem("Credentials")||"{}"),n=v("user"),a=Object(h.a)(n,2),r=a[0],s=a[1];return!r&&t.token&&s(t),Object(O.jsxs)(C.a,{token:t.token,party:t.party,httpBaseUrl:N,children:[" ",e.children," "]})}var M=n(52),A=n(32),L=n.n(A),E=n(734),D=n(735),P=n(736),T=n(731),H=n(738),B=n(733),F=n(104),G=n.n(F),_=n(28),Z=function(e){var t=e.onLogin,n=["Admin","Zoolog","Meteorologist","Hamal"],a=d.a.useState(""),r=Object(h.a)(a,2),c=r[0],i=r[1],l=d.a.useState(""),o=Object(h.a)(l,2),u=o[0],b=o[1],p=Object(j.useCallback)(function(){var e=Object(M.a)(L.a.mark((function e(a){var r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new G.a({token:a.token,httpBaseUrl:N}),e.next=4,r.fetchByKey(_.User.User,a.party);case 4:if(e.t0=e.sent,null!==e.t0){e.next=8;break}return e.next=8,r.create(_.User.User,{username:a.party,parties:n});case 8:t({party:a.party,token:a.token,ledgerId:a.ledgerId}),e.next=14;break;case 11:e.prev=11,e.t1=e.catch(0),alert("Unknown error:\n".concat(e.t1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),[t,c,u]),g=function(){var e=Object(M.a)(L.a.mark((function e(t){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=I("User"===u?c:u),e.next=5,p(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.useEffect)((function(){var e=new URL(window.location.toString()),t=e.searchParams.get("token");if(null!==t){var n=e.searchParams.get("party");if(null===n)throw Error("When 'token' is passed via URL, 'party' must be passed too.");e.search="",window.history.replaceState(window.history.state,"",e.toString()),p({token:t,party:n,ledgerId:R})}}),[p]),Object(O.jsx)(D.a,{className:"login-from",textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(O.jsxs)(D.a.Column,{style:{maxWidth:450},children:[Object(O.jsx)(P.a,{as:"h1",textAlign:"center",size:"huge",style:{color:"#223668"},children:Object(O.jsx)(P.a.Content,{children:"Distrubuted Flight Approval"})}),Object(O.jsx)(T.a,{size:"large",className:"test-select-login-screen",children:Object(O.jsx)(H.a,{children:S!==s.PROD_DABL?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(T.a.Dropdown,{fluid:!0,search:!0,selection:!0,className:"select-request-receiver",placeholder:"Select party",options:[{key:"User",text:"User",value:"User"},{key:"Admin",text:"Admin",value:"Admin"},{key:"Zoolog",text:"Zoolog",value:"Zoolog"},{key:"Meteorologist",text:"Meteorologist",value:"Meteorologist"},{key:"Hamal",text:"Hamal",value:"Hamal"}],onChange:function(e){var t;return b(null!==(t=e.currentTarget.textContent)&&void 0!==t?t:"")}}),"User"===u&&Object(O.jsx)(T.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",className:"test-select-username-field",onChange:function(e){return i(e.currentTarget.value)}}),Object(O.jsx)(B.a,{primary:!0,fluid:!0,className:"test-select-login-button",onClick:g,disabled:!u||"User"===u&&!c,children:"Log in"})]}):Object(O.jsx)(B.a,{primary:!0,fluid:!0,onClick:function(){window.location.assign("https://login.projectdabl.com/auth/login?ledgerId=".concat(R))},children:"Log in with DABL"})})})]})})},Q=function(e){var t=e.logoutLink,n=(e.requestLink,e.approvalLink,Object(j.useState)(!1)),a=Object(h.a)(n,2),r=a[0],s=a[1],c=v("user"),i=Object(h.a)(c,2),l=(i[0],i[1]),o=(Object(k.useLedger)(),Object(k.useParty)()),u=function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sessionStorage.setItem("Credentials",JSON.stringify(t)),l(t),s(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(E.a,{icon:!0,borderless:!0,children:[Object(O.jsxs)(E.a.Menu,{position:"right",className:"test-select-main-menu",children:[o&&Object(O.jsxs)(E.a.Item,{position:"right",children:["You are logged in as ",o,"."]}),o&&Object(O.jsx)(E.a.Item,{position:"right",active:!1,className:"test-select-log-out",onClick:function(){sessionStorage.removeItem("Credentials"),l(null),window.location.href=t},icon:"log out"}),!o&&Object(O.jsx)(E.a.Item,{position:"right",active:!1,className:"test-select-sign-in",onClick:function(){s(!r)},icon:"sign in"})]}),r&&Object(O.jsx)(Z,{onLogin:u})]})},W=n(76),J=n(730),z=n(732),Y=n(163),K=function(){var e=Object(k.useQuery)(_.User.FlightRequest),t=Object(k.useQuery)(_.User.CompletedRequest),n=e.contracts.map((function(e){return e.payload})).reverse(),a=t.contracts.map((function(e){return e.payload})).reverse(),r=[].concat(Object(y.a)(n),Object(y.a)(a));return r.sort((function(e,t){return new Date(e.flight.time).getTime()-new Date(t.flight.time).getTime()})),Object(O.jsxs)(H.a,{className:"daml-section",children:[Object(O.jsxs)(P.a,{as:"h2",children:[Object(O.jsx)(W.a,{name:"globe"}),Object(O.jsx)(P.a.Content,{children:"All Requests"})]}),Object(O.jsx)(J.a,{}),Object(O.jsx)(z.a,{relaxed:!0,className:"items",children:r&&r.map((function(e,t){return Object(O.jsxs)(H.a,{children:[e.approvers.length===e.parties.length?Object(O.jsx)(Y.a,{color:"green",ribbon:!0,className:"label",children:"Approve"}):Object(O.jsx)(Y.a,{color:"blue",ribbon:!0,className:"label",children:"Request"}),Object(O.jsxs)(z.a.Item,{children:["Info: ",Object(O.jsxs)("strong",{children:["lat: ",e.flight.lat,", lng: ",e.flight.lng,", altitude: ",e.flight.altitude]})]}),Object(O.jsxs)(z.a.Item,{children:["Time: ",Object(O.jsxs)("strong",{children:[e.flight.timeStart," --\x3e ",e.flight.timeEnd]})]}),Object(O.jsxs)(z.a.Item,{children:["Approvers: ",Object(O.jsx)("strong",{children:e.approvers.join(", ")||"---"})]}),Object(O.jsxs)(z.a.Item,{children:["Disapprovers: ",Object(O.jsx)("strong",{children:e.disapprovers.join(", ")||"---"})]}),Object(O.jsxs)(z.a.Item,{children:["User: ",Object(O.jsx)("strong",{children:e.user})]})]},e.user+e.flight.timeStart+e.flight.timeEnd)}))})]})},V=n(66),X=function(e){var t=Object(j.useState)(!1),n=Object(h.a)(t,2),a=n[0],r=n[1];return Object(O.jsx)(V.Marker,{position:e.position,visible:e.visible,onMouseOver:function(){r(!0)},onMouseOut:function(){r(!1)},children:a&&Object(O.jsx)(V.InfoWindow,{children:Object(O.jsxs)("h4",{children:["Lat: ",e.position.lat,Object(O.jsx)("br",{})," Lng: ",e.position.lng]})})})},$=Object(V.withScriptjs)(Object(V.withGoogleMap)((function(e){return Object(O.jsx)(V.GoogleMap,{defaultZoom:8,defaultCenter:{lat:e.lat,lng:e.lng},children:Object(O.jsx)(X,{position:{lat:e.lat,lng:e.lng},visible:!0})})}))),ee=function(e){return Object(O.jsx)($,{googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyCGNWEx_cSfFlxaon2GjBqynYxrAD7kJbY&libraries=geometry,drawing,places",loadingElement:Object(O.jsx)("div",{style:{height:"100%"}}),containerElement:Object(O.jsx)("div",{style:{height:"100%"}}),mapElement:Object(O.jsx)("div",{style:{height:"100%"}}),lat:e.lat,lng:e.lng})},te=Object(V.withScriptjs)(Object(V.withGoogleMap)((function(e){var t=Object(j.useState)({lat:33.36157687471931,lng:35.648549973336756}),n=Object(h.a)(t,2),a=n[0],r=n[1],s=Object(j.useState)(9),c=Object(h.a)(s,2),i=c[0],l=c[1],o=Object(j.useState)({lat:33.36157687471931,lng:35.648549973336756}),u=Object(h.a)(o,2),d=u[0],b=u[1],p=Object(j.useState)(!1),g=Object(h.a)(p,2),m=g[0],x=g[1];return Object(O.jsx)(V.GoogleMap,{onRightClick:function(e){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){r({lat:e.coords.latitude,lng:e.coords.longitude}),l(13)}))},onClick:function(t){t.latLng&&(b({lat:t.latLng.lat(),lng:t.latLng.lng()}),x(!0),e.onSubmit(t.latLng.lat(),t.latLng.lng()))},zoom:i,center:a,defaultZoom:8,defaultCenter:{lat:0,lng:0},children:Object(O.jsx)(X,{position:d,visible:m})})}))),ne=function(e){return Object(O.jsx)(te,{googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyCGNWEx_cSfFlxaon2GjBqynYxrAD7kJbY&libraries=geometry,drawing,places",loadingElement:Object(O.jsx)("div",{style:{height:"100%"}}),containerElement:Object(O.jsx)("div",{style:{height:"100%"}}),mapElement:Object(O.jsx)("div",{style:{height:"100%"}}),onSubmit:e.onSubmit})},ae=function(e){e.update;var t=["Zoolog","Meteorologist","Hamal"],n=Object(k.useParty)(),a=Object(k.useLedger)(),r=Object(k.useReload)(),s=n&&!t.includes(n),c=d.a.useState({}),i=Object(h.a)(c,2),l=i[0],o=i[1],u=d.a.useState(!1),j=Object(h.a)(u,2),b=j[0],p=j[1],g=d.a.useState(!0),x=Object(h.a)(g,2),f=x[0],v=x[1],y=function(){var e=Object(M.a)(L.a.mark((function e(s){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.preventDefault(),p(!0),e.next=5,a.exerciseByKey(_.User.User.CreateRequest,n,{parties:t,flight:l});case 5:r(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("Error sending message:\n".concat(JSON.stringify(e.t0)));case 11:return e.prev=11,p(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(H.a,{className:"daml-section",children:[Object(O.jsxs)(P.a,{as:"h2",children:[Object(O.jsx)(W.a,{name:"globe"}),Object(O.jsx)(P.a.Content,{children:"Create Request"})]}),Object(O.jsx)(J.a,{}),s&&Object(O.jsxs)(T.a,{className:"create-request-form",children:[Object(O.jsxs)(B.a,{basic:!0,color:"blue",icon:!0,labelPosition:"left",onClick:function(){v(!f)},children:[Object(O.jsx)(W.a,{name:"map"}),"map"]}),Object(O.jsx)("div",{className:"create-request-map",style:{width:"100%",height:f?"400px":"0px"},children:f&&Object(O.jsx)(ne,{onSubmit:function(e,t){return o(Object(m.a)(Object(m.a)({},l),{},{lat:e.toString(),lng:t.toString()}))}})}),Object(O.jsx)(T.a.Input,{className:"select-request-content",label:"lat coordinates",value:l.lat,onChange:function(e){return o(Object(m.a)(Object(m.a)({},l),{},{lat:e.currentTarget.value}))}}),Object(O.jsx)(T.a.Input,{className:"select-request-content",label:"lng coordinates",value:l.lng,onChange:function(e){return o(Object(m.a)(Object(m.a)({},l),{},{lng:e.currentTarget.value}))}}),Object(O.jsx)(T.a.Input,{className:"select-request-content",label:"Altitude",type:"number",step:"100",min:"0",value:l.altitude,onChange:function(e){return o(Object(m.a)(Object(m.a)({},l),{},{altitude:e.currentTarget.value}))}}),Object(O.jsx)(J.a,{className:"Divider"}),Object(O.jsx)(T.a.Input,{className:"select-request-content",label:"Start time",type:"datetime-local",value:l.timeStart,onChange:function(e){return o(Object(m.a)(Object(m.a)({},l),{},{timeStart:e.currentTarget.value}))}}),Object(O.jsx)(T.a.Input,{className:"select-request-content",label:"End time",type:"datetime-local",value:l.timeEnd,onChange:function(e){return o(Object(m.a)(Object(m.a)({},l),{},{timeEnd:e.currentTarget.value}))}}),Object(O.jsx)(B.a,{primary:!0,className:"select-request-send-button",onClick:y,disabled:b||!(l.lat&&l.lng&&l.altitude),loading:b,content:"Send"})]})]})},re=function(){var e=Object(k.useParty)(),t=Object(k.useQuery)(_.User.CompletedRequest).contracts.filter((function(t){return t.payload.user===e&&t.payload.disapprovers.length+t.payload.approvers.length===t.payload.parties.length})).map((function(e){return e.payload})).reverse();return Object(O.jsxs)(H.a,{className:"daml-section",children:[Object(O.jsxs)(P.a,{as:"h2",children:[Object(O.jsx)(W.a,{name:"globe"}),Object(O.jsx)(P.a.Content,{children:"My Approved Requests"})]}),Object(O.jsx)(J.a,{}),Object(O.jsx)(z.a,{relaxed:!0,className:"items",children:t&&t.map((function(e,t){return Object(O.jsx)(H.a,{children:Object(O.jsx)(z.a.Item,{children:Object(O.jsxs)("strong",{children:[e.flight.timeStart," --\x3e ",e.flight.timeEnd,", lat: ",e.flight.lat,", lng: ",e.flight.lng,", altitude: ",e.flight.altitude]})})},e.user+e.flight.timeStart+e.flight.timeEnd)}))})]})},se=function(){var e=Object(k.useParty)(),t=Object(k.useQuery)(_.User.FlightRequest),n=t.contracts.filter((function(t){return t.payload.user===e&&t.payload.disapprovers.length+t.payload.approvers.length<t.payload.parties.length})).map((function(e){return e.payload})).reverse();return console.log(t),Object(O.jsxs)(H.a,{className:"daml-section",children:[Object(O.jsxs)(P.a,{as:"h2",children:[Object(O.jsx)(W.a,{name:"globe"}),Object(O.jsx)(P.a.Content,{children:"My Requests"})]}),Object(O.jsx)(J.a,{}),Object(O.jsx)(z.a,{relaxed:!0,className:"items",children:n&&n.map((function(e,t){return Object(O.jsxs)(H.a,{children:[Object(O.jsx)(Y.a,{color:"blue",ribbon:!0,className:"label",children:"Request"}),Object(O.jsxs)(z.a,{children:[Object(O.jsxs)(z.a.Item,{children:["Info: ",Object(O.jsxs)("strong",{children:["lat: ",e.flight.lat,", lng: ",e.flight.lng,", altitude: ",e.flight.altitude]})]}),Object(O.jsxs)(z.a.Item,{children:["Time: ",Object(O.jsxs)("strong",{children:[e.flight.timeStart," --\x3e ",e.flight.timeEnd]})]}),Object(O.jsxs)(z.a.Item,{children:["Approvers: ",Object(O.jsx)("strong",{children:e.approvers.join(", ")||"---"})]}),Object(O.jsxs)(z.a.Item,{children:["Disapprovers: ",Object(O.jsx)("strong",{children:e.disapprovers.join(", ")||"---"})]})]})]},e.user+e.flight.timeStart+e.flight.timeEnd)}))})]})},ce=function(){var e=Object(k.useParty)(),t=Object(k.useLedger)(),n=Object(k.useQuery)(_.User.FlightRequest),a=Object(k.useReload)(),r=d.a.useState(!1),s=Object(h.a)(r,2),c=s[0],i=s[1],l=n.contracts.filter((function(t){return t.payload.parties.includes(e)&&!(t.payload.approvers.includes(e)||t.payload.disapprovers.includes(e))})).map((function(e){return Object(m.a)(Object(m.a)({},e.payload),{},{contractId:e.contractId})}));function o(){return(o=Object(M.a)(L.a.mark((function n(r){return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.exercise(_.User.FlightRequest.Approved,r,{approver:e});case 2:a();case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function u(){return(u=Object(M.a)(L.a.mark((function n(r){return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.exercise(_.User.FlightRequest.Disapproved,r,{disapprover:e});case 2:a();case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(O.jsxs)(H.a,{className:"daml-section",children:[Object(O.jsxs)(P.a,{as:"h2",children:[Object(O.jsx)(W.a,{name:"globe"}),Object(O.jsx)(P.a.Content,{children:"Requests For Approval"})]}),Object(O.jsx)(J.a,{}),Object(O.jsx)(z.a,{relaxed:!0,className:"items",children:l&&l.map((function(t,n){return Object(O.jsxs)(H.a,{children:[Object(O.jsx)(Y.a,{as:"a",color:"teal",ribbon:"left",children:"Review"}),Object(O.jsx)("div",{className:"create-request-map",style:{width:"100%",height:c?"200px":"0px"},children:c&&Object(O.jsx)(ee,{lat:parseFloat(t.flight.lat),lng:parseFloat(t.flight.lng)})}),Object(O.jsxs)(z.a.Item,{children:["Time: ",Object(O.jsxs)("strong",{children:[t.flight.timeStart," --\x3e ",t.flight.timeEnd]})]}),Object(O.jsxs)(z.a.Item,{children:["Location: ",Object(O.jsxs)("strong",{children:["lat: ",t.flight.lat,",  lng: ",t.flight.lng,",  altitude: ",t.flight.altitude]})]}),Object(O.jsxs)(z.a.Item,{children:["User: ",Object(O.jsx)("strong",{children:t.user})]}),t.parties.includes(e)&&Object(O.jsxs)("div",{className:"actions",children:[Object(O.jsx)(B.a,{positive:!0,onClick:function(){return function(e){return o.apply(this,arguments)}(t.contractId)},children:"Approve"}),Object(O.jsx)(B.a,{secondary:!0,onClick:function(){return function(e){return u.apply(this,arguments)}(t.contractId)},children:"Disapprove"}),Object(O.jsxs)(B.a,{basic:!0,color:"blue",icon:!0,labelPosition:"left",onClick:function(){i(!c)},children:[Object(O.jsx)(W.a,{name:"map"}),"map"]})]})]},t.user+t.flight.timeStart+t.flight.timeEnd)}))})]})},ie=n(27);ie.f.register(ie.a,ie.l,ie.c,ie.p,ie.b,ie.d,ie.h,ie.k,ie.o,ie.q,ie.r,ie.t,ie.e,ie.m,ie.n,ie.s,ie.v,ie.w,ie.g,ie.i,ie.j,ie.x,ie.y,ie.u);var le=function(e){e.update;var t=Object(k.useParty)(),n=Object(k.useLedger)(),a=Object(k.useReload)(),r=t&&["Admin"].includes(t),s=Object(k.useQuery)(_.User.User).contracts.map((function(e){return{key:e.payload.username,text:e.payload.username,value:e.payload.username}})),c=d.a.useState({}),i=Object(h.a)(c,2),l=i[0],o=i[1],u=d.a.useState(!1),j=Object(h.a)(u,2),b=j[0],p=j[1],g=function(){var e=Object(M.a)(L.a.mark((function e(r){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.preventDefault(),p(!0),e.next=5,n.create(_.User.GroupMember,{org:t,group:l.group,member:l.member});case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("Error sending message:\n".concat(JSON.stringify(e.t0)));case 11:return e.prev=11,p(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(H.a,{className:"daml-section",children:[Object(O.jsxs)(P.a,{as:"h2",children:[Object(O.jsx)(W.a,{name:"globe"}),Object(O.jsx)(P.a.Content,{children:"Create Members"})]}),Object(O.jsx)(J.a,{}),r&&Object(O.jsxs)(T.a,{className:"create-request-form",children:[Object(O.jsx)(T.a.Dropdown,{fluid:!0,search:!0,selection:!0,className:"select-request-receiver",placeholder:"Select group",options:[{key:"User",text:"User",value:"User"},{key:"Zoolog",text:"Zoolog",value:"Zoolog"},{key:"Meteorologist",text:"Meteorologist",value:"Meteorologist"},{key:"Hamal",text:"Hamal",value:"Hamal"}],onChange:function(e){return o(Object(m.a)(Object(m.a)({},l),{},{group:e.currentTarget.textContent}))}}),Object(O.jsx)(T.a.Dropdown,{fluid:!0,search:!0,selection:!0,className:"select-request-receiver",placeholder:"Select group",options:s,onChange:function(e){return o(Object(m.a)(Object(m.a)({},l),{},{member:e.currentTarget.textContent}))}}),Object(O.jsx)(B.a,{primary:!0,className:"select-request-send-button",onClick:g,loading:b,content:"Send"})]})]})},oe={UserWidget:Q,CreateRequest:ae,AllRequests:K,RequestsGraph:function(){var e=Object(k.useParty)(),t=Object(j.useRef)(),n=Object(k.useQuery)(_.User.FlightRequest).contracts.map((function(e){var t=200*Math.random()+55,n=200*Math.random()+55,a=200*Math.random()+55;return{data:[{x:e.payload.flight.timeStart,y:e.payload.flight.altitude,r:13,backgroundColor:"rgba(".concat(t,", ").concat(n,", ").concat(a,", 1)")},{x:e.payload.flight.timeEnd,y:e.payload.flight.altitude,r:13,backgroundColor:"rgba(".concat(t,", ").concat(n,", ").concat(a,", 1)")}],label:e.payload.user,borderColor:"rgba(".concat(t,", ").concat(n,", ").concat(a,", 1)"),backgroundColor:"rgba(".concat(t,", ").concat(n,", ").concat(a,", 0.5)"),tension:.1}}));return Object(j.useEffect)((function(){var e;return t.current&&(e=new ie.f(t.current,{type:"line",data:{datasets:n}})),function(){e&&e.destroy()}}),[n]),Object(O.jsxs)(H.a,{className:"daml-section",children:[Object(O.jsxs)(P.a,{as:"h2",children:[Object(O.jsx)(W.a,{name:"globe"}),Object(O.jsx)(P.a.Content,{children:"Requests Graph"})]}),Object(O.jsx)(J.a,{}),e&&Object(O.jsx)("canvas",{ref:t})]})},MyRequests:se,MyApprovedRequests:re,RequestsForApproval:ce,Users:function(){var e=Object(k.useQuery)(_.User.User).contracts.map((function(e){return e.payload}));return Object(O.jsxs)(H.a,{className:"daml-section",children:[Object(O.jsxs)(P.a,{as:"h2",children:[Object(O.jsx)(W.a,{name:"globe"}),Object(O.jsx)(P.a.Content,{children:"Users"})]}),Object(O.jsx)(J.a,{}),Object(O.jsx)(z.a,{relaxed:!0,className:"items",children:e&&e.map((function(e,t){return Object(O.jsx)(H.a,{children:Object(O.jsxs)(z.a.Item,{children:["Name: ",Object(O.jsx)("strong",{children:e.username})]})},e.username)}))})]})},CreateMember:le,Members:function(){var e=Object(k.useQuery)(_.User.GroupMember),t={};return e.contracts.forEach((function(e){t[e.payload.group]||(t[e.payload.group]=[]),t[e.payload.group].push(e.payload.member)})),Object(O.jsxs)(H.a,{className:"daml-section",children:[Object(O.jsxs)(P.a,{as:"h2",children:[Object(O.jsx)(W.a,{name:"globe"}),Object(O.jsx)(P.a.Content,{children:"Members"})]}),Object(O.jsx)(J.a,{}),Object(O.jsx)(z.a,{relaxed:!0,className:"items",children:Object.keys(t).map((function(e){return Object(O.jsxs)(H.a,{children:[Object(O.jsxs)(z.a.Item,{children:["Group: ",Object(O.jsx)("strong",{children:e})]}),Object(O.jsxs)(z.a.Item,{children:["Members: ",Object(O.jsx)("strong",{children:t[e].join(", ")})]})]},e)}))})]})}};window.BlocktreeWidgets=function(e,t,n){try{oe[e]?a(t,oe[e],n):t.innerHTML="Block <strong>".concat(e,"</strong> is empty client component")}catch(r){t.innerHTML="Client component is broken. <br/> ".concat(r)}};var ue=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"connectedCallback",value:function(){var e=this.getAttribute("name");try{oe[e]?a(this,oe[e],this.dataset):this.innerHTML="Block <strong>".concat(e,"</strong> is empty client component")}catch(t){this.innerHTML="Client component is broken. <br/> ".concat(t)}}}]),n}(Object(u.a)(HTMLElement));customElements.define("elementree-widget",ue),p.a.render(Object(O.jsx)(f,{children:Object(O.jsx)(U,{children:Object(O.jsx)(w,{})})}),document.createElement("div")),root&&(root.innerHTML="\n  <elementree-widget name='UserWidget'></elementree-widget>\n\n  <elementree-widget name='CreateMember'></elementree-widget>\n  <elementree-widget name='Members'></elementree-widget>\n\n  <elementree-widget name='CreateRequest'></elementree-widget>\n  <elementree-widget name='MyRequests'></elementree-widget>\n\n  <elementree-widget name='MyApprovedRequests'></elementree-widget>\n  <elementree-widget name='RequestsForApproval'></elementree-widget>\n\n  <elementree-widget name='AllRequests'></elementree-widget>\n  <elementree-widget name='Users'></elementree-widget>\n\n  <elementree-widget name='RequestsGraph'></elementree-widget>\n")}},[[722,1,2]]]);
//# sourceMappingURL=main.a8572dc1.chunk.js.map