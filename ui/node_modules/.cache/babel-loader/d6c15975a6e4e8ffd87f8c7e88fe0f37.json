{"ast":null,"code":"// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { encode } from 'jwt-simple';\nimport { ledgerId } from './config';\nexport const APPLICATION_ID = 'create-daml-app'; // NOTE: This is for testing purposes only.\n// To handle authentication properly,\n// see https://docs.daml.com/app-dev/authentication.html.\n\nexport const SECRET_KEY = 'secret';\n\nfunction computeToken(party) {\n  const payload = {\n    \"https://daml.com/ledger-api\": {\n      \"ledgerId\": ledgerId,\n      \"applicationId\": APPLICATION_ID,\n      \"actAs\": [party]\n    }\n  };\n  return encode(payload, SECRET_KEY, 'HS256');\n}\n\nexport const computeCredentials = party => {\n  const token = computeToken(party);\n  return {\n    party,\n    token,\n    ledgerId\n  };\n};","map":{"version":3,"sources":["/Users/liorkesos/projects/mafat/daml/create-daml-app/ui/src/Credentials.ts"],"names":["encode","ledgerId","APPLICATION_ID","SECRET_KEY","computeToken","party","payload","computeCredentials","token"],"mappings":"AAAA;AACA;AAEA,SAASA,MAAT,QAAuB,YAAvB;AACA,SAASC,QAAT,QAAyB,UAAzB;AAEA,OAAO,MAAMC,cAAsB,GAAG,iBAA/B,C,CAEP;AACA;AACA;;AACA,OAAO,MAAMC,UAAkB,GAAG,QAA3B;;AAQP,SAASC,YAAT,CAAsBC,KAAtB,EAA6C;AAC3C,QAAMC,OAAO,GAAG;AACd,mCAA+B;AAC7B,kBAAYL,QADiB;AAE7B,uBAAiBC,cAFY;AAG7B,eAAS,CAACG,KAAD;AAHoB;AADjB,GAAhB;AAOA,SAAOL,MAAM,CAACM,OAAD,EAAUH,UAAV,EAAsB,OAAtB,CAAb;AACD;;AAED,OAAO,MAAMI,kBAAkB,GAAIF,KAAD,IAAgC;AAChE,QAAMG,KAAK,GAAGJ,YAAY,CAACC,KAAD,CAA1B;AACA,SAAO;AAACA,IAAAA,KAAD;AAAQG,IAAAA,KAAR;AAAeP,IAAAA;AAAf,GAAP;AACD,CAHM","sourcesContent":["// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { encode } from 'jwt-simple';\nimport { ledgerId } from './config';\n\nexport const APPLICATION_ID: string = 'create-daml-app';\n\n// NOTE: This is for testing purposes only.\n// To handle authentication properly,\n// see https://docs.daml.com/app-dev/authentication.html.\nexport const SECRET_KEY: string = 'secret';\n\nexport type Credentials = {\n  party: string;\n  token: string;\n  ledgerId: string;\n}\n\nfunction computeToken(party: string): string {\n  const payload = {\n    \"https://daml.com/ledger-api\": {\n      \"ledgerId\": ledgerId,\n      \"applicationId\": APPLICATION_ID,\n      \"actAs\": [party]\n    }\n  };\n  return encode(payload, SECRET_KEY, 'HS256');\n}\n\nexport const computeCredentials = (party: string): Credentials => {\n  const token = computeToken(party);\n  return {party, token, ledgerId};\n}\n\nexport default Credentials;\n"]},"metadata":{},"sourceType":"module"}