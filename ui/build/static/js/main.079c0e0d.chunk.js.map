{"version":3,"sources":["../daml.js/create-daml-app-0.1.0/lib/User/index.js","../daml.js/create-daml-app-0.1.0/lib/User/module.js","../daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662/lib/index.js","../daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662/lib/DA/index.js","../daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662/lib/DA/Internal/index.js","../daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662/lib/DA/Internal/Template/index.js","../daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662/lib/DA/Internal/Template/module.js","config.ts","Credentials.ts","components/LoginScreen.tsx","components/UserList.tsx","components/PartyListEdit.tsx","components/MainView.tsx","components/MainScreen.tsx","components/App.tsx","index.tsx","../daml.js/create-daml-app-0.1.0/lib/index.js"],"names":["Object","defineProperty","exports","value","m","p","hasOwnProperty","__export","require","jtv","damlTypes","pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662","Follow","decoder","lazyMemo","object","userToFollow","Party","encode","__typed__","User","templateId","keyDecoder","keyEncode","username","following","List","Archive","template","choiceName","argumentDecoder","DA","Internal","Template","argumentEncode","resultDecoder","Unit","resultEncode","ContractId","registerTemplate","packageId","DeploymentMode","deploymentMode","window","location","hostname","endsWith","PROD_DABL","PROD_OTHER","ledgerId","split","process","httpBaseUrl","undefined","computeCredentials","party","token","payload","computeToken","LoginScreen","onLogin","React","useState","setUsername","login","useCallback","credentials","a","ledger","Ledger","fetchByKey","user","create","alert","handleLogin","event","preventDefault","useEffect","url","URL","toString","searchParams","get","Error","search","history","replaceState","state","Grid","textAlign","style","height","verticalAlign","Column","maxWidth","Header","as","size","color","Content","Image","href","target","src","alt","spaced","Form","className","Segment","Input","fluid","icon","iconPosition","placeholder","onChange","e","currentTarget","Button","primary","onClick","assign","UserList","users","onFollow","divided","relaxed","sort","x","y","localeCompare","map","Item","Icon","name","floated","link","PartyListEdit","parties","onAddParty","newParty","setNewParty","isSubmitting","setIsSubmitting","addParty","success","onSubmit","readOnly","loading","type","MainView","useParty","myUser","useStreamFetchByKeys","contracts","allUsers","useStreamQueries","followers","useMemo","filter","useLedger","follow","exerciseByKey","Container","centered","columns","Row","stretched","padding","Subheader","Divider","MainScreen","onLogout","Menu","borderless","position","active","App","setCredentials","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.079c0e0d.chunk.js","sourcesContent":["\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require('./module'));\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable-next-line no-unused-vars */\nvar jtv = require('@mojotech/json-type-validation');\n/* eslint-disable-next-line no-unused-vars */\nvar damlTypes = require('@daml/types');\n/* eslint-disable-next-line no-unused-vars */\nvar damlLedger = require('@daml/ledger');\n\nvar pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662 = require('@daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662');\n\n\nexports.Follow = {\n  decoder: damlTypes.lazyMemo(function () { return jtv.object({userToFollow: damlTypes.Party.decoder, }); }),\n  encode: function (__typed__) {\n  return {\n    userToFollow: damlTypes.Party.encode(__typed__.userToFollow),\n  };\n}\n,\n};\n\n\n\nexports.User = {\n  templateId: '95ecb0f837f28c9115dbcae3c4f2d50c4687725843a94008e75bc3b2db796c7a:User:User',\n  keyDecoder: damlTypes.lazyMemo(function () { return damlTypes.lazyMemo(function () { return damlTypes.Party.decoder; }); }),\n  keyEncode: function (__typed__) { return damlTypes.Party.encode(__typed__); },\n  decoder: damlTypes.lazyMemo(function () { return jtv.object({username: damlTypes.Party.decoder, following: damlTypes.List(damlTypes.Party).decoder, }); }),\n  encode: function (__typed__) {\n  return {\n    username: damlTypes.Party.encode(__typed__.username),\n    following: damlTypes.List(damlTypes.Party).encode(__typed__.following),\n  };\n}\n,\n  Archive: {\n    template: function () { return exports.User; },\n    choiceName: 'Archive',\n    argumentDecoder: damlTypes.lazyMemo(function () { return pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662.DA.Internal.Template.Archive.decoder; }),\n    argumentEncode: function (__typed__) { return pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662.DA.Internal.Template.Archive.encode(__typed__); },\n    resultDecoder: damlTypes.lazyMemo(function () { return damlTypes.Unit.decoder; }),\n    resultEncode: function (__typed__) { return damlTypes.Unit.encode(__typed__); },\n  },\n  Follow: {\n    template: function () { return exports.User; },\n    choiceName: 'Follow',\n    argumentDecoder: damlTypes.lazyMemo(function () { return exports.Follow.decoder; }),\n    argumentEncode: function (__typed__) { return exports.Follow.encode(__typed__); },\n    resultDecoder: damlTypes.lazyMemo(function () { return damlTypes.ContractId(exports.User).decoder; }),\n    resultEncode: function (__typed__) { return damlTypes.ContractId(exports.User).encode(__typed__); },\n  },\n};\n\n\ndamlTypes.registerTemplate(exports.User);\n\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DA = require('./DA');\nexports.DA = DA;\nexports.packageId = 'd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662';\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Internal = require('./Internal');\nexports.Internal = Internal;\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Template = require('./Template');\nexports.Template = Template;\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require('./module'));\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable-next-line no-unused-vars */\nvar jtv = require('@mojotech/json-type-validation');\n/* eslint-disable-next-line no-unused-vars */\nvar damlTypes = require('@daml/types');\n/* eslint-disable-next-line no-unused-vars */\nvar damlLedger = require('@daml/ledger');\n\n\nexports.Archive = {\n  decoder: damlTypes.lazyMemo(function () { return jtv.object({}); }),\n  encode: function (__typed__) {\n  return {\n  };\n}\n,\n};\n\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nexport enum DeploymentMode {\n  DEV,\n  PROD_DABL,\n  PROD_OTHER,\n}\n\nexport const deploymentMode: DeploymentMode =\n  process.env.NODE_ENV === 'development'\n  ? DeploymentMode.DEV\n  : window.location.hostname.endsWith('.projectdabl.com')\n  ? DeploymentMode.PROD_DABL\n  : DeploymentMode.PROD_OTHER;\n\n// Decide the ledger ID based on the deployment mode first,\n// then an environment variable, falling back on the sandbox ledger ID.\nexport const ledgerId: string =\n  deploymentMode === DeploymentMode.PROD_DABL\n  ? window.location.hostname.split('.')[0]\n  : process.env.REACT_APP_LEDGER_ID\n  ?? 'create-daml-app-sandbox';\n\nexport const httpBaseUrl =\n  deploymentMode === DeploymentMode.PROD_DABL\n  ? `https://api.projectdabl.com/data/${ledgerId}/`\n  : undefined;\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { encode } from 'jwt-simple';\nimport { ledgerId } from './config';\n\nexport const APPLICATION_ID: string = 'create-daml-app';\n\n// NOTE: This is for testing purposes only.\n// To handle authentication properly,\n// see https://docs.daml.com/app-dev/authentication.html.\nexport const SECRET_KEY: string = 'secret';\n\nexport type Credentials = {\n  party: string;\n  token: string;\n  ledgerId: string;\n}\n\nfunction computeToken(party: string): string {\n  const payload = {\n    \"https://daml.com/ledger-api\": {\n      \"ledgerId\": ledgerId,\n      \"applicationId\": APPLICATION_ID,\n      \"actAs\": [party]\n    }\n  };\n  return encode(payload, SECRET_KEY, 'HS256');\n}\n\nexport const computeCredentials = (party: string): Credentials => {\n  const token = computeToken(party);\n  return {party, token, ledgerId};\n}\n\nexport default Credentials;\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useCallback } from 'react'\nimport { Button, Form, Grid, Header, Image, Segment } from 'semantic-ui-react'\nimport Credentials, { computeCredentials } from '../Credentials';\nimport Ledger from '@daml/ledger';\nimport { User } from '@daml.js/create-daml-app';\nimport { DeploymentMode, deploymentMode, ledgerId, httpBaseUrl} from '../config';\nimport { useEffect } from 'react';\n\ntype Props = {\n  onLogin: (credentials: Credentials) => void;\n}\n\n/**\n * React component for the login screen of the `App`.\n */\nconst LoginScreen: React.FC<Props> = ({onLogin}) => {\n  const [username, setUsername] = React.useState('');\n\n  const login = useCallback(async (credentials: Credentials) => {\n    try {\n      const ledger = new Ledger({token: credentials.token, httpBaseUrl});\n      let userContract = await ledger.fetchByKey(User.User, credentials.party);\n      if (userContract === null) {\n        const user = {username: credentials.party, following: []};\n        userContract = await ledger.create(User.User, user);\n      }\n      onLogin(credentials);\n    } catch(error) {\n      alert(`Unknown error:\\n${error}`);\n    }\n  }, [onLogin]);\n\n  const handleLogin = async (event: React.FormEvent) => {\n    event.preventDefault();\n    const credentials = computeCredentials(username);\n    await login(credentials);\n  }\n\n  const handleDablLogin = () => {\n    window.location.assign(`https://login.projectdabl.com/auth/login?ledgerId=${ledgerId}`);\n  }\n\n  useEffect(() => {\n    const url = new URL(window.location.toString());\n    const token = url.searchParams.get('token');\n    if (token === null) {\n      return;\n    }\n    const party = url.searchParams.get('party');\n    if (party === null) {\n      throw Error(\"When 'token' is passed via URL, 'party' must be passed too.\");\n    }\n    url.search = '';\n    window.history.replaceState(window.history.state, '', url.toString());\n    login({token, party, ledgerId});\n  }, [login]);\n\n  return (\n    <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n      <Grid.Column style={{ maxWidth: 450 }}>\n        <Header as='h1' textAlign='center' size='huge' style={{color: '#223668'}}>\n          <Header.Content>\n            Create\n            <Image\n              as='a'\n              href='https://www.daml.com/'\n              target='_blank'\n              src='/daml.svg'\n              alt='Daml Logo'\n              spaced\n              size='small'\n              verticalAlign='bottom'\n            />\n            App\n          </Header.Content>\n        </Header>\n        <Form size='large' className='test-select-login-screen'>\n          <Segment>\n            {deploymentMode !== DeploymentMode.PROD_DABL\n            ? <>\n                {/* FORM_BEGIN */}\n                <Form.Input\n                  fluid\n                  icon='user'\n                  iconPosition='left'\n                  placeholder='Username'\n                  value={username}\n                  className='test-select-username-field'\n                  onChange={e => setUsername(e.currentTarget.value)}\n                />\n                <Button\n                  primary\n                  fluid\n                  className='test-select-login-button'\n                  onClick={handleLogin}>\n                  Log in\n                </Button>\n                {/* FORM_END */}\n              </>\n            : <Button primary fluid onClick={handleDablLogin}>\n                Log in with DABL\n              </Button>\n            }\n          </Segment>\n        </Form>\n      </Grid.Column>\n    </Grid>\n  );\n};\n\nexport default LoginScreen;\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Icon, List } from 'semantic-ui-react'\nimport { Party } from '@daml/types';\nimport { User } from '@daml.js/create-daml-app';\n\ntype Props = {\n  users: User.User[];\n  onFollow: (userToFollow: Party) => void;\n}\n\n/**\n * React component to display a list of `User`s.\n * Every party in the list can be added as a friend.\n */\nconst UserList: React.FC<Props> = ({users, onFollow}) => {\n  return (\n    <List divided relaxed>\n      {[...users].sort((x, y) => x.username.localeCompare(y.username)).map(user =>\n        <List.Item key={user.username}>\n          <List.Icon name='user' />\n          <List.Content>\n            <List.Content floated='right'>\n              <Icon\n                name='add user'\n                link\n                className='test-select-add-user-icon'\n                onClick={() => onFollow(user.username)} />\n            </List.Content>\n            <List.Header className='test-select-user-in-network'>{user.username}</List.Header>\n          </List.Content>\n          <List.List>\n            {[...user.following].sort((x, y) => x.localeCompare(y)).map(userToFollow =>\n              <List.Item key={userToFollow}>\n                <List.Content floated='right'>\n                  <Icon\n                    name='add user'\n                    link\n                    className='test-select-add-user-following-icon'\n                    onClick={() => onFollow(userToFollow)} />\n                </List.Content>\n                <List.Icon name='user outline' />\n                <List.Content>\n                  <List.Header>{userToFollow}</List.Header>\n                </List.Content>\n              </List.Item>\n            )}\n          </List.List>\n        </List.Item>\n      )}\n    </List>\n  );\n};\n\nexport default UserList;\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Form, List, Button } from 'semantic-ui-react';\nimport { Party } from '@daml/types';\n\ntype Props = {\n  parties: Party[];\n  onAddParty: (party: Party) => Promise<boolean>;\n}\n\n/**\n * React component to edit a list of `Party`s.\n */\nconst PartyListEdit: React.FC<Props> = ({parties, onAddParty}) => {\n  const [newParty, setNewParty] = React.useState('');\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\n\n  const addParty = async (event?: React.FormEvent) => {\n    if (event) {\n      event.preventDefault();\n    }\n    setIsSubmitting(true);\n    const success = await onAddParty(newParty);\n    setIsSubmitting(false);\n    if (success) {\n      setNewParty('');\n    }\n  }\n\n  return (\n    <List relaxed>\n      {[...parties].sort((x, y) => x.localeCompare(y)).map((party) =>\n        <List.Item\n          key={party}\n        >\n          <List.Icon name='user outline' />\n          <List.Content>\n            <List.Header className='test-select-following'>\n              {party}\n            </List.Header>\n          </List.Content>\n        </List.Item>\n      )}\n      <br />\n      <Form onSubmit={addParty}>\n        <Form.Input\n          fluid\n          readOnly={isSubmitting}\n          loading={isSubmitting}\n          className='test-select-follow-input'\n          placeholder=\"Username to follow\"\n          value={newParty}\n          onChange={(event) => setNewParty(event.currentTarget.value)}\n        />\n        <Button\n          type='submit'\n          className='test-select-follow-button'>\n          Follow\n        </Button>\n      </Form>\n    </List>\n  );\n};\n\nexport default PartyListEdit;\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useMemo } from 'react';\nimport { Container, Grid, Header, Icon, Segment, Divider } from 'semantic-ui-react';\nimport { Party } from '@daml/types';\nimport { User } from '@daml.js/create-daml-app';\nimport { useParty, useLedger, useStreamFetchByKeys, useStreamQueries } from '@daml/react';\nimport UserList from './UserList';\nimport PartyListEdit from './PartyListEdit';\n\n// USERS_BEGIN\nconst MainView: React.FC = () => {\n  const username = useParty();\n  const myUserResult = useStreamFetchByKeys(User.User, () => [username], [username]);\n  const myUser = myUserResult.contracts[0]?.payload;\n  const allUsers = useStreamQueries(User.User).contracts;\n// USERS_END\n\n  // Sorted list of users that are following the current user\n  const followers = useMemo(() =>\n    allUsers\n    .map(user => user.payload)\n    .filter(user => user.username !== username)\n    .sort((x, y) => x.username.localeCompare(y.username)),\n    [allUsers, username]);\n\n  // FOLLOW_BEGIN\n  const ledger = useLedger();\n\n  const follow = async (userToFollow: Party): Promise<boolean> => {\n    try {\n      await ledger.exerciseByKey(User.User.Follow, username, {userToFollow});\n      return true;\n    } catch (error) {\n      alert(`Unknown error:\\n${error}`);\n      return false;\n    }\n  }\n  // FOLLOW_END\n\n  return (\n    <Container>\n      <Grid centered columns={2}>\n        <Grid.Row stretched>\n          <Grid.Column>\n            <Header as='h1' size='huge' color='blue' textAlign='center' style={{padding: '1ex 0em 0ex 0em'}}>\n                {myUser ? `Welcome, ${myUser.username}!` : 'Loading...'}\n            </Header>\n\n            <Segment>\n              <Header as='h2'>\n                <Icon name='user' />\n                <Header.Content>\n                  {myUser?.username ?? 'Loading...'}\n                  <Header.Subheader>Users I'm following</Header.Subheader>\n                </Header.Content>\n              </Header>\n              <Divider />\n              <PartyListEdit\n                parties={myUser?.following ?? []}\n                onAddParty={follow}\n              />\n            </Segment>\n            <Segment>\n              <Header as='h2'>\n                <Icon name='globe' />\n                <Header.Content>\n                  The Network\n                  <Header.Subheader>My followers and users they are following</Header.Subheader>\n                </Header.Content>\n              </Header>\n              <Divider />\n              {/* USERLIST_BEGIN */}\n              <UserList\n                users={followers}\n                onFollow={follow}\n              />\n              {/* USERLIST_END */}\n            </Segment>\n          </Grid.Column>\n        </Grid.Row>\n      </Grid>\n    </Container>\n  );\n}\n\nexport default MainView;\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Image, Menu } from 'semantic-ui-react'\nimport MainView from './MainView';\nimport { useParty } from '@daml/react';\n\ntype Props = {\n  onLogout: () => void;\n}\n\n/**\n * React component for the main screen of the `App`.\n */\nconst MainScreen: React.FC<Props> = ({onLogout}) => {\n  return (\n    <>\n      <Menu icon borderless>\n        <Menu.Item>\n          <Image\n            as='a'\n            href='https://www.daml.com/'\n            target='_blank'\n            src='/daml.svg'\n            alt='Daml Logo'\n            size='mini'\n          />\n        </Menu.Item>\n        <Menu.Menu position='right' className='test-select-main-menu'>\n          <Menu.Item position='right'>\n            You are logged in as {useParty()}.\n          </Menu.Item>\n          <Menu.Item\n            position='right'\n            active={false}\n            className='test-select-log-out'\n            onClick={onLogout}\n            icon='log out'\n          />\n        </Menu.Menu>\n      </Menu>\n\n      <MainView/>\n    </>\n  );\n};\n\nexport default MainScreen;\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport LoginScreen from './LoginScreen';\nimport MainScreen from './MainScreen';\nimport DamlLedger from '@daml/react';\nimport Credentials from '../Credentials';\nimport { httpBaseUrl } from '../config';\n\n/**\n * React component for the entry point into the application.\n */\n// APP_BEGIN\nconst App: React.FC = () => {\n  const [credentials, setCredentials] = React.useState<Credentials | undefined>();\n\n  return credentials\n    ? <DamlLedger\n        token={credentials.token}\n        party={credentials.party}\n        httpBaseUrl={httpBaseUrl}\n      >\n        <MainScreen onLogout={() => setCredentials(undefined)}/>\n      </DamlLedger>\n    : <LoginScreen onLogin={setCredentials} />\n}\n// APP_END\n\nexport default App;\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'semantic-ui-css/semantic.min.css';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar User = require('./User');\nexports.User = User;\nexports.packageId = '95ecb0f837f28c9115dbcae3c4f2d50c4687725843a94008e75bc3b2db796c7a';\n"],"sourceRoot":""}