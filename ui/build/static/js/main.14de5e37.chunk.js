(this.webpackJsonpdfa=this.webpackJsonpdfa||[]).push([[0],{296:function(e,c,n){},304:function(e,c){},306:function(e,c){},316:function(e,c){},318:function(e,c){},34:function(e,c,n){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=n(403);c.User=d,c.packageId="f6c1cd4b6865e28cb060452f7c31763d54f9cccc2704b072073ea8424f49a1f7"},345:function(e,c){},347:function(e,c){},348:function(e,c){},353:function(e,c){},355:function(e,c){},361:function(e,c){},363:function(e,c){},382:function(e,c){},394:function(e,c){},397:function(e,c){},403:function(e,c,n){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),function(e){for(var n in e)c.hasOwnProperty(n)||(c[n]=e[n])}(n(404))},404:function(e,c,n){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=n(85),o=n(96),r=(n(72),n(405)),t=n(409);c.Request={templateId:"f6c1cd4b6865e28cb060452f7c31763d54f9cccc2704b072073ea8424f49a1f7:User:Request",keyDecoder:o.lazyMemo((function(){return o.lazyMemo((function(){return r.DA.Types.Tuple2(o.Party,o.Text).decoder}))})),keyEncode:function(e){return r.DA.Types.Tuple2(o.Party,o.Text).encode(e)},decoder:o.lazyMemo((function(){return d.object({sender:o.Party.decoder,receiver:o.Party.decoder,content:o.Text.decoder,status:o.Text.decoder,geo:r.DA.Types.Tuple2(o.Int,o.Int).decoder})})),encode:function(e){return{sender:o.Party.encode(e.sender),receiver:o.Party.encode(e.receiver),content:o.Text.encode(e.content),status:o.Text.encode(e.status),geo:r.DA.Types.Tuple2(o.Int,o.Int).encode(e.geo)}},Archive:{template:function(){return c.Request},choiceName:"Archive",argumentDecoder:o.lazyMemo((function(){return t.DA.Internal.Template.Archive.decoder})),argumentEncode:function(e){return t.DA.Internal.Template.Archive.encode(e)},resultDecoder:o.lazyMemo((function(){return o.Unit.decoder})),resultEncode:function(e){return o.Unit.encode(e)}}},o.registerTemplate(c.Request),c.SendRequest={decoder:o.lazyMemo((function(){return d.object({receiver:o.Party.decoder,content:o.Text.decoder,geo:r.DA.Types.Tuple2(o.Int,o.Int).decoder})})),encode:function(e){return{receiver:o.Party.encode(e.receiver),content:o.Text.encode(e.content),geo:r.DA.Types.Tuple2(o.Int,o.Int).encode(e.geo)}}},c.User={templateId:"f6c1cd4b6865e28cb060452f7c31763d54f9cccc2704b072073ea8424f49a1f7:User:User",keyDecoder:o.lazyMemo((function(){return o.lazyMemo((function(){return o.Party.decoder}))})),keyEncode:function(e){return o.Party.encode(e)},decoder:o.lazyMemo((function(){return d.object({username:o.Party.decoder,requests:o.List(c.Request).decoder})})),encode:function(e){return{username:o.Party.encode(e.username),requests:o.List(c.Request).encode(e.requests)}},Archive:{template:function(){return c.User},choiceName:"Archive",argumentDecoder:o.lazyMemo((function(){return t.DA.Internal.Template.Archive.decoder})),argumentEncode:function(e){return t.DA.Internal.Template.Archive.encode(e)},resultDecoder:o.lazyMemo((function(){return o.Unit.decoder})),resultEncode:function(e){return o.Unit.encode(e)}},SendRequest:{template:function(){return c.User},choiceName:"SendRequest",argumentDecoder:o.lazyMemo((function(){return c.SendRequest.decoder})),argumentEncode:function(e){return c.SendRequest.encode(e)},resultDecoder:o.lazyMemo((function(){return o.ContractId(c.Admin).decoder})),resultEncode:function(e){return o.ContractId(c.Admin).encode(e)}}},o.registerTemplate(c.User),c.Admin={templateId:"f6c1cd4b6865e28cb060452f7c31763d54f9cccc2704b072073ea8424f49a1f7:User:Admin",keyDecoder:o.lazyMemo((function(){return o.lazyMemo((function(){return o.Party.decoder}))})),keyEncode:function(e){return o.Party.encode(e)},decoder:o.lazyMemo((function(){return d.object({adminame:o.Party.decoder,requests:o.List(c.Request).decoder})})),encode:function(e){return{adminame:o.Party.encode(e.adminame),requests:o.List(c.Request).encode(e.requests)}},Archive:{template:function(){return c.Admin},choiceName:"Archive",argumentDecoder:o.lazyMemo((function(){return t.DA.Internal.Template.Archive.decoder})),argumentEncode:function(e){return t.DA.Internal.Template.Archive.encode(e)},resultDecoder:o.lazyMemo((function(){return o.Unit.decoder})),resultEncode:function(e){return o.Unit.encode(e)}}},o.registerTemplate(c.Admin)},405:function(e,c,n){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=n(406);c.DA=d,c.packageId="40f452260bef3f29dede136108fc08a88d5a5250310281067087da6f0baddff7"},406:function(e,c,n){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=n(407);c.Types=d},407:function(e,c,n){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),function(e){for(var n in e)c.hasOwnProperty(n)||(c[n]=e[n])}(n(408))},408:function(e,c,n){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=n(85),o=n(96);n(72);c.Either=function(e,c){return{decoder:o.lazyMemo((function(){return d.oneOf(d.object({tag:d.constant("Left"),value:e.decoder}),d.object({tag:d.constant("Right"),value:c.decoder}))})),encode:function(n){switch(n.tag){case"Left":return{tag:n.tag,value:e.encode(n.value)};case"Right":return{tag:n.tag,value:c.encode(n.value)};default:throw"unrecognized type tag: "+n.tag+" while serializing a value of type Either"}}}},c.Tuple2=function(e,c){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder})})),encode:function(n){return{_1:e.encode(n._1),_2:c.encode(n._2)}}}},c.Tuple3=function(e,c,n){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3)}}}},c.Tuple4=function(e,c,n,r){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4)}}}},c.Tuple5=function(e,c,n,r,t){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5)}}}},c.Tuple6=function(e,c,n,r,t,_){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder,_6:_.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5),_6:_.encode(d._6)}}}},c.Tuple7=function(e,c,n,r,t,_,u){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder,_6:_.decoder,_7:u.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5),_6:_.encode(d._6),_7:u.encode(d._7)}}}},c.Tuple8=function(e,c,n,r,t,_,u,a){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder,_6:_.decoder,_7:u.decoder,_8:a.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5),_6:_.encode(d._6),_7:u.encode(d._7),_8:a.encode(d._8)}}}},c.Tuple9=function(e,c,n,r,t,_,u,a,i){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder,_6:_.decoder,_7:u.decoder,_8:a.decoder,_9:i.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5),_6:_.encode(d._6),_7:u.encode(d._7),_8:a.encode(d._8),_9:i.encode(d._9)}}}},c.Tuple10=function(e,c,n,r,t,_,u,a,i,s){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder,_6:_.decoder,_7:u.decoder,_8:a.decoder,_9:i.decoder,_10:s.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5),_6:_.encode(d._6),_7:u.encode(d._7),_8:a.encode(d._8),_9:i.encode(d._9),_10:s.encode(d._10)}}}},c.Tuple11=function(e,c,n,r,t,_,u,a,i,s,l){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder,_6:_.decoder,_7:u.decoder,_8:a.decoder,_9:i.decoder,_10:s.decoder,_11:l.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5),_6:_.encode(d._6),_7:u.encode(d._7),_8:a.encode(d._8),_9:i.encode(d._9),_10:s.encode(d._10),_11:l.encode(d._11)}}}},c.Tuple12=function(e,c,n,r,t,_,u,a,i,s,l,f){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder,_6:_.decoder,_7:u.decoder,_8:a.decoder,_9:i.decoder,_10:s.decoder,_11:l.decoder,_12:f.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5),_6:_.encode(d._6),_7:u.encode(d._7),_8:a.encode(d._8),_9:i.encode(d._9),_10:s.encode(d._10),_11:l.encode(d._11),_12:f.encode(d._12)}}}},c.Tuple13=function(e,c,n,r,t,_,u,a,i,s,l,f,j){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder,_6:_.decoder,_7:u.decoder,_8:a.decoder,_9:i.decoder,_10:s.decoder,_11:l.decoder,_12:f.decoder,_13:j.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5),_6:_.encode(d._6),_7:u.encode(d._7),_8:a.encode(d._8),_9:i.encode(d._9),_10:s.encode(d._10),_11:l.encode(d._11),_12:f.encode(d._12),_13:j.encode(d._13)}}}},c.Tuple14=function(e,c,n,r,t,_,u,a,i,s,l,f,j,m){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder,_6:_.decoder,_7:u.decoder,_8:a.decoder,_9:i.decoder,_10:s.decoder,_11:l.decoder,_12:f.decoder,_13:j.decoder,_14:m.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5),_6:_.encode(d._6),_7:u.encode(d._7),_8:a.encode(d._8),_9:i.encode(d._9),_10:s.encode(d._10),_11:l.encode(d._11),_12:f.encode(d._12),_13:j.encode(d._13),_14:m.encode(d._14)}}}},c.Tuple15=function(e,c,n,r,t,_,u,a,i,s,l,f,j,m,p){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder,_6:_.decoder,_7:u.decoder,_8:a.decoder,_9:i.decoder,_10:s.decoder,_11:l.decoder,_12:f.decoder,_13:j.decoder,_14:m.decoder,_15:p.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5),_6:_.encode(d._6),_7:u.encode(d._7),_8:a.encode(d._8),_9:i.encode(d._9),_10:s.encode(d._10),_11:l.encode(d._11),_12:f.encode(d._12),_13:j.encode(d._13),_14:m.encode(d._14),_15:p.encode(d._15)}}}},c.Tuple16=function(e,c,n,r,t,_,u,a,i,s,l,f,j,m,p,b){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder,_6:_.decoder,_7:u.decoder,_8:a.decoder,_9:i.decoder,_10:s.decoder,_11:l.decoder,_12:f.decoder,_13:j.decoder,_14:m.decoder,_15:p.decoder,_16:b.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5),_6:_.encode(d._6),_7:u.encode(d._7),_8:a.encode(d._8),_9:i.encode(d._9),_10:s.encode(d._10),_11:l.encode(d._11),_12:f.encode(d._12),_13:j.encode(d._13),_14:m.encode(d._14),_15:p.encode(d._15),_16:b.encode(d._16)}}}},c.Tuple17=function(e,c,n,r,t,_,u,a,i,s,l,f,j,m,p,b,y){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder,_6:_.decoder,_7:u.decoder,_8:a.decoder,_9:i.decoder,_10:s.decoder,_11:l.decoder,_12:f.decoder,_13:j.decoder,_14:m.decoder,_15:p.decoder,_16:b.decoder,_17:y.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5),_6:_.encode(d._6),_7:u.encode(d._7),_8:a.encode(d._8),_9:i.encode(d._9),_10:s.encode(d._10),_11:l.encode(d._11),_12:f.encode(d._12),_13:j.encode(d._13),_14:m.encode(d._14),_15:p.encode(d._15),_16:b.encode(d._16),_17:y.encode(d._17)}}}},c.Tuple18=function(e,c,n,r,t,_,u,a,i,s,l,f,j,m,p,b,y,h){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder,_6:_.decoder,_7:u.decoder,_8:a.decoder,_9:i.decoder,_10:s.decoder,_11:l.decoder,_12:f.decoder,_13:j.decoder,_14:m.decoder,_15:p.decoder,_16:b.decoder,_17:y.decoder,_18:h.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5),_6:_.encode(d._6),_7:u.encode(d._7),_8:a.encode(d._8),_9:i.encode(d._9),_10:s.encode(d._10),_11:l.encode(d._11),_12:f.encode(d._12),_13:j.encode(d._13),_14:m.encode(d._14),_15:p.encode(d._15),_16:b.encode(d._16),_17:y.encode(d._17),_18:h.encode(d._18)}}}},c.Tuple19=function(e,c,n,r,t,_,u,a,i,s,l,f,j,m,p,b,y,h,v){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder,_6:_.decoder,_7:u.decoder,_8:a.decoder,_9:i.decoder,_10:s.decoder,_11:l.decoder,_12:f.decoder,_13:j.decoder,_14:m.decoder,_15:p.decoder,_16:b.decoder,_17:y.decoder,_18:h.decoder,_19:v.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5),_6:_.encode(d._6),_7:u.encode(d._7),_8:a.encode(d._8),_9:i.encode(d._9),_10:s.encode(d._10),_11:l.encode(d._11),_12:f.encode(d._12),_13:j.encode(d._13),_14:m.encode(d._14),_15:p.encode(d._15),_16:b.encode(d._16),_17:y.encode(d._17),_18:h.encode(d._18),_19:v.encode(d._19)}}}},c.Tuple20=function(e,c,n,r,t,_,u,a,i,s,l,f,j,m,p,b,y,h,v,O){return{decoder:o.lazyMemo((function(){return d.object({_1:e.decoder,_2:c.decoder,_3:n.decoder,_4:r.decoder,_5:t.decoder,_6:_.decoder,_7:u.decoder,_8:a.decoder,_9:i.decoder,_10:s.decoder,_11:l.decoder,_12:f.decoder,_13:j.decoder,_14:m.decoder,_15:p.decoder,_16:b.decoder,_17:y.decoder,_18:h.decoder,_19:v.decoder,_20:O.decoder})})),encode:function(d){return{_1:e.encode(d._1),_2:c.encode(d._2),_3:n.encode(d._3),_4:r.encode(d._4),_5:t.encode(d._5),_6:_.encode(d._6),_7:u.encode(d._7),_8:a.encode(d._8),_9:i.encode(d._9),_10:s.encode(d._10),_11:l.encode(d._11),_12:f.encode(d._12),_13:j.encode(d._13),_14:m.encode(d._14),_15:p.encode(d._15),_16:b.encode(d._16),_17:y.encode(d._17),_18:h.encode(d._18),_19:v.encode(d._19),_20:O.encode(d._20)}}}}},409:function(e,c,n){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=n(410);c.DA=d,c.packageId="d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662"},410:function(e,c,n){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=n(411);c.Internal=d},411:function(e,c,n){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=n(412);c.Template=d},412:function(e,c,n){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),function(e){for(var n in e)c.hasOwnProperty(n)||(c[n]=e[n])}(n(413))},413:function(e,c,n){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=n(85),o=n(96);n(72);c.Archive={decoder:o.lazyMemo((function(){return d.object({})})),encode:function(e){return{}}}},547:function(e,c,n){"use strict";n.r(c);var d,o,r=n(0),t=n.n(r),_=n(56),u=n.n(_),a=(n(295),n(296),n(45)),i=n(47),s=n.n(i),l=n(89),f=n(561),j=n(562),m=n(557),p=n(563),b=n(559),y=n(264);!function(e){e[e.DEV=0]="DEV",e[e.PROD_DABL=1]="PROD_DABL",e[e.PROD_OTHER=2]="PROD_OTHER"}(o||(o={}));var h=window.location.hostname.endsWith(".projectdabl.com")?o.PROD_DABL:o.PROD_OTHER,v=h===o.PROD_DABL?window.location.hostname.split(".")[0]:null!==(d="dfa-sandbox")?d:"dfa-sandbox",O=h===o.PROD_DABL?"https://api.projectdabl.com/data/".concat(v,"/"):void 0;var g=function(e){return{party:e,token:function(e){var c={"https://daml.com/ledger-api":{ledgerId:v,applicationId:"dfa",actAs:[e]}};return Object(y.encode)(c,"secret","HS256")}(e),ledgerId:v}},x=n(72),T=n.n(x),M=n(34),A=n(7),D=function(e){var c=e.onLogin,n=t.a.useState(""),d=Object(a.a)(n,2),_=d[0],u=d[1],i=Object(r.useCallback)(function(){var e=Object(l.a)(s.a.mark((function e(n){var d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d=new T.a({token:n.token,httpBaseUrl:O}),e.next=4,d.fetchByKey(M.User.User,n.party);case 4:if(e.t0=e.sent,null!==e.t0){e.next=8;break}return e.next=8,d.create(M.User.User,{username:n.party,requests:[]});case 8:c(n),e.next=14;break;case 11:e.prev=11,e.t1=e.catch(0),alert("Unknown error:\n".concat(e.t1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(c){return e.apply(this,arguments)}}(),[c]),y=function(){var e=Object(l.a)(s.a.mark((function e(c){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),n=g(_),e.next=4,i(n);case 4:case"end":return e.stop()}}),e)})));return function(c){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=new URL(window.location.toString()),c=e.searchParams.get("token");if(null!==c){var n=e.searchParams.get("party");if(null===n)throw Error("When 'token' is passed via URL, 'party' must be passed too.");e.search="",window.history.replaceState(window.history.state,"",e.toString()),i({token:c,party:n,ledgerId:v})}}),[i]),Object(A.jsx)(f.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(A.jsxs)(f.a.Column,{style:{maxWidth:450},children:[Object(A.jsx)(j.a,{as:"h1",textAlign:"center",size:"huge",style:{color:"#223668"},children:Object(A.jsx)(j.a.Content,{children:"Distrubuted Flight Approval"})}),Object(A.jsx)(m.a,{size:"large",className:"test-select-login-screen",children:Object(A.jsx)(p.a,{children:h!==o.PROD_DABL?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(m.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",value:_,className:"test-select-username-field",onChange:function(e){return u(e.currentTarget.value)}}),Object(A.jsx)(b.a,{primary:!0,fluid:!0,className:"test-select-login-button",onClick:y,children:"Log in"})]}):Object(A.jsx)(b.a,{primary:!0,fluid:!0,onClick:function(){window.location.assign("https://login.projectdabl.com/auth/login?ledgerId=".concat(v))},children:"Log in with DABL"})})})]})})},P=n(560),z=n(555),q=n(46),w=n(556),I=n(26),R=n.n(I),k=n(564),U=n(166),S=function(){return Object(A.jsx)(k.a,{relaxed:!0,children:Object(I.useStreamQuery)(M.User.Request).contracts.map((function(e){var c=e.payload,n=c.sender,d=c.receiver,o=c.content;return Object(A.jsxs)(U.a,{className:"select-request-item",children:[Object(A.jsxs)("strong",{children:[n," \u2192 ",d,":"]})," ",o]},e.contractId)}))})},L=function(e){var c=e.admins,n=Object(I.useParty)(),d=t.a.useState(),o=Object(a.a)(d,2),r=o[0],_=o[1],u=t.a.useState(""),i=Object(a.a)(u,2),f=i[0],j=i[1],p=t.a.useState(!1),y=Object(a.a)(p,2),h=y[0],v=y[1],O=Object(I.useLedger)(),g=function(){var e=Object(l.a)(s.a.mark((function e(c){var d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c.preventDefault(),void 0!==r){e.next=4;break}return e.abrupt("return");case 4:return v(!0),d=[1,1],e.next=8,O.exerciseByKey(M.User.User.SendRequest,n,{receiver:r,content:f,geo:{_1:d[0].toString(),_2:d[1].toString()}});case 8:j(""),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),alert("Error sending message:\n".concat(JSON.stringify(e.t0)));case 14:return e.prev=14,v(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(c){return e.apply(this,arguments)}}();return Object(A.jsxs)(m.a,{onSubmit:g,children:[Object(A.jsx)(m.a.Dropdown,{fluid:!0,search:!0,selection:!0,className:"select-request-receiver",placeholder:"Select who you want to process your request",options:c.map((function(e){return{key:null===e||void 0===e?void 0:e.adminame,text:null===e||void 0===e?void 0:e.adminame,value:null===e||void 0===e?void 0:e.adminame}})),onChange:function(e){var c;return _(null!==(c=e.currentTarget.textContent)&&void 0!==c?c:void 0)}}),Object(A.jsx)(m.a.Input,{className:"select-request-content",placeholder:"Request content",value:f,onChange:function(e){return j(e.currentTarget.value)}}),Object(A.jsx)(b.a,{fluid:!0,className:"select-request-send-button",type:"submit",disabled:h||void 0===r||""===f,loading:h,content:"Send"})]})},E=function(e){var c=e.requests;return Object(A.jsx)(k.a,{relaxed:!0,children:c&&c.map((function(e){return Object(A.jsx)(k.a.Item,{header:"To:"+e.receiver,content:"Content: "+e.content})}))})},C=function(e){e.credentials;var c,n=Object(I.useParty)(),d=null===(c=Object(I.useStreamFetchByKeys)(M.User.User,(function(){return[n]}),[n]).contracts[0])||void 0===c?void 0:c.payload,o=Object(I.useStreamQuery)(M.User.Admin).contracts.map((function(e){return null===e||void 0===e?void 0:e.payload}));return Object(A.jsx)(z.a,{children:Object(A.jsx)(f.a,{centered:!0,columns:2,children:Object(A.jsx)(f.a.Row,{stretched:!0,children:Object(A.jsxs)(f.a.Column,{children:[Object(A.jsx)(j.a,{as:"h1",size:"huge",color:"blue",textAlign:"center",style:{padding:"1ex 0em 0ex 0em"},children:d?"Welcome, ".concat(d.username,"!"):"Loading..."}),Object(A.jsxs)(p.a,{children:[Object(A.jsxs)(j.a,{as:"h2",children:[Object(A.jsx)(q.a,{name:"pencil square"}),Object(A.jsxs)(j.a.Content,{children:["Requests",Object(A.jsx)(j.a.Subheader,{children:"Send a Request"})]})]}),Object(A.jsx)(L,{admins:o}),Object(A.jsx)(w.a,{}),Object(A.jsx)(S,{})]}),Object(A.jsxs)(p.a,{children:[Object(A.jsxs)(j.a,{as:"h2",children:[Object(A.jsx)(q.a,{name:"globe"}),Object(A.jsx)(j.a.Content,{children:"My requests"})]}),Object(A.jsx)(w.a,{}),Object(A.jsx)(E,{requests:null===d||void 0===d?void 0:d.requests})]})]})})})})},N=function(e){var c=e.credentials,n=e.onLogout;return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(P.a,{icon:!0,borderless:!0,children:Object(A.jsxs)(P.a.Menu,{position:"right",className:"test-select-main-menu",children:[Object(A.jsxs)(P.a.Item,{position:"right",children:["You are logged in as ",Object(I.useParty)(),"."]}),Object(A.jsx)(P.a.Item,{position:"right",active:!1,className:"test-select-log-out",onClick:n,icon:"log out"})]})}),Object(A.jsx)(C,{credentials:c})]})},B=function(){var e=t.a.useState(),c=Object(a.a)(e,2),n=c[0],d=c[1];return n?Object(A.jsx)(R.a,{token:n.token,party:n.party,httpBaseUrl:O,children:Object(A.jsx)(N,{credentials:n,onLogout:function(){return d(void 0)}})}):Object(A.jsx)(D,{onLogin:d})};u.a.render(Object(A.jsx)(B,{}),document.getElementById("root"))}},[[547,1,2]]]);
//# sourceMappingURL=main.14de5e37.chunk.js.map