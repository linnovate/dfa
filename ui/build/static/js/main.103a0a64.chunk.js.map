{"version":3,"sources":["../daml.js/create-daml-app-0.1.0/lib/index.js","../daml.js/create-daml-app-0.1.0/lib/User/index.js","../daml.js/create-daml-app-0.1.0/lib/User/module.js","../daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662/lib/index.js","../daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662/lib/DA/index.js","../daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662/lib/DA/Internal/index.js","../daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662/lib/DA/Internal/Template/index.js","../daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662/lib/DA/Internal/Template/module.js","config.ts","Credentials.ts","components/LoginScreen.tsx","components/Requests.tsx","components/RequestSendAndEdit.tsx","components/MainView.tsx","components/MainScreen.tsx","components/App.tsx","index.tsx"],"names":["Object","defineProperty","exports","value","User","require","packageId","m","p","hasOwnProperty","__export","jtv","damlTypes","pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662","Request","templateId","keyDecoder","lazyMemo","constant","undefined","keyEncode","decoder","object","sender","Party","receiver","content","Text","encode","__typed__","Archive","template","choiceName","argumentDecoder","DA","Internal","Template","argumentEncode","resultDecoder","Unit","resultEncode","registerTemplate","SendRequest","username","ContractId","DeploymentMode","deploymentMode","window","location","hostname","endsWith","PROD_DABL","PROD_OTHER","ledgerId","split","process","httpBaseUrl","computeCredentials","party","token","payload","computeToken","LoginScreen","onLogin","React","useState","setUsername","login","useCallback","credentials","a","ledger","Ledger","fetchByKey","user","following","create","alert","handleLogin","event","preventDefault","useEffect","url","URL","toString","searchParams","get","Error","search","history","replaceState","state","Grid","textAlign","style","height","verticalAlign","Column","maxWidth","Header","as","size","color","Content","Form","className","Segment","Input","fluid","icon","iconPosition","placeholder","onChange","e","currentTarget","Button","primary","onClick","assign","Requests","List","relaxed","useStreamQuery","contracts","map","request","ListItem","contractId","RequestSendAndEdit","admins","useParty","setReceiver","setContent","isSubmitting","setIsSubmitting","useLedger","submit","exerciseByKey","JSON","stringify","onSubmit","Dropdown","selection","options","admin","key","text","textContent","type","disabled","loading","MainView","myUser","useStreamFetchByKeys","useFetchByKey","contract","Container","centered","columns","Row","stretched","padding","Icon","name","Subheader","Divider","MainScreen","onLogout","Menu","borderless","position","Item","active","App","setCredentials","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.103a0a64.chunk.js","sourcesContent":["\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar User = require('./User');\nexports.User = User;\nexports.packageId = '91976a336dda8ea60d0e859ce793eb7e8e348f02cf1d03d7228aaa62de6daa89';\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require('./module'));\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable-next-line no-unused-vars */\nvar jtv = require('@mojotech/json-type-validation');\n/* eslint-disable-next-line no-unused-vars */\nvar damlTypes = require('@daml/types');\n/* eslint-disable-next-line no-unused-vars */\nvar damlLedger = require('@daml/ledger');\n\nvar pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662 = require('@daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662');\n\n\nexports.Request = {\n  templateId: '91976a336dda8ea60d0e859ce793eb7e8e348f02cf1d03d7228aaa62de6daa89:User:Request',\n  keyDecoder: damlTypes.lazyMemo(function () { return jtv.constant(undefined); }),\n  keyEncode: function () { throw 'EncodeError'; },\n  decoder: damlTypes.lazyMemo(function () { return jtv.object({sender: damlTypes.Party.decoder, receiver: damlTypes.Party.decoder, content: damlTypes.Text.decoder, }); }),\n  encode: function (__typed__) {\n  return {\n    sender: damlTypes.Party.encode(__typed__.sender),\n    receiver: damlTypes.Party.encode(__typed__.receiver),\n    content: damlTypes.Text.encode(__typed__.content),\n  };\n}\n,\n  Archive: {\n    template: function () { return exports.Request; },\n    choiceName: 'Archive',\n    argumentDecoder: damlTypes.lazyMemo(function () { return pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662.DA.Internal.Template.Archive.decoder; }),\n    argumentEncode: function (__typed__) { return pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662.DA.Internal.Template.Archive.encode(__typed__); },\n    resultDecoder: damlTypes.lazyMemo(function () { return damlTypes.Unit.decoder; }),\n    resultEncode: function (__typed__) { return damlTypes.Unit.encode(__typed__); },\n  },\n};\n\n\ndamlTypes.registerTemplate(exports.Request);\n\n\n\nexports.SendRequest = {\n  decoder: damlTypes.lazyMemo(function () { return jtv.object({sender: damlTypes.Party.decoder, content: damlTypes.Text.decoder, }); }),\n  encode: function (__typed__) {\n  return {\n    sender: damlTypes.Party.encode(__typed__.sender),\n    content: damlTypes.Text.encode(__typed__.content),\n  };\n}\n,\n};\n\n\n\nexports.User = {\n  templateId: '91976a336dda8ea60d0e859ce793eb7e8e348f02cf1d03d7228aaa62de6daa89:User:User',\n  keyDecoder: damlTypes.lazyMemo(function () { return damlTypes.lazyMemo(function () { return damlTypes.Party.decoder; }); }),\n  keyEncode: function (__typed__) { return damlTypes.Party.encode(__typed__); },\n  decoder: damlTypes.lazyMemo(function () { return jtv.object({username: damlTypes.Party.decoder, }); }),\n  encode: function (__typed__) {\n  return {\n    username: damlTypes.Party.encode(__typed__.username),\n  };\n}\n,\n  Archive: {\n    template: function () { return exports.User; },\n    choiceName: 'Archive',\n    argumentDecoder: damlTypes.lazyMemo(function () { return pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662.DA.Internal.Template.Archive.decoder; }),\n    argumentEncode: function (__typed__) { return pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662.DA.Internal.Template.Archive.encode(__typed__); },\n    resultDecoder: damlTypes.lazyMemo(function () { return damlTypes.Unit.decoder; }),\n    resultEncode: function (__typed__) { return damlTypes.Unit.encode(__typed__); },\n  },\n  SendRequest: {\n    template: function () { return exports.User; },\n    choiceName: 'SendRequest',\n    argumentDecoder: damlTypes.lazyMemo(function () { return exports.SendRequest.decoder; }),\n    argumentEncode: function (__typed__) { return exports.SendRequest.encode(__typed__); },\n    resultDecoder: damlTypes.lazyMemo(function () { return damlTypes.ContractId(exports.Request).decoder; }),\n    resultEncode: function (__typed__) { return damlTypes.ContractId(exports.Request).encode(__typed__); },\n  },\n};\n\n\ndamlTypes.registerTemplate(exports.User);\n\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DA = require('./DA');\nexports.DA = DA;\nexports.packageId = 'd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662';\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Internal = require('./Internal');\nexports.Internal = Internal;\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Template = require('./Template');\nexports.Template = Template;\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require('./module'));\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable-next-line no-unused-vars */\nvar jtv = require('@mojotech/json-type-validation');\n/* eslint-disable-next-line no-unused-vars */\nvar damlTypes = require('@daml/types');\n/* eslint-disable-next-line no-unused-vars */\nvar damlLedger = require('@daml/ledger');\n\n\nexports.Archive = {\n  decoder: damlTypes.lazyMemo(function () { return jtv.object({}); }),\n  encode: function (__typed__) {\n  return {\n  };\n}\n,\n};\n\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nexport enum DeploymentMode {\n  DEV,\n  PROD_DABL,\n  PROD_OTHER,\n}\n\nexport const deploymentMode: DeploymentMode =\n  process.env.NODE_ENV === 'development'\n  ? DeploymentMode.DEV\n  : window.location.hostname.endsWith('.projectdabl.com')\n  ? DeploymentMode.PROD_DABL\n  : DeploymentMode.PROD_OTHER;\n\n// Decide the ledger ID based on the deployment mode first,\n// then an environment variable, falling back on the sandbox ledger ID.\nexport const ledgerId: string =\n  deploymentMode === DeploymentMode.PROD_DABL\n  ? window.location.hostname.split('.')[0]\n  : process.env.REACT_APP_LEDGER_ID\n  ?? 'create-daml-app-sandbox';\n\nexport const httpBaseUrl =\n  deploymentMode === DeploymentMode.PROD_DABL\n  ? `https://api.projectdabl.com/data/${ledgerId}/`\n  : undefined;\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { encode } from 'jwt-simple';\nimport { ledgerId } from './config';\n\nexport const APPLICATION_ID: string = 'create-daml-app';\n\n// NOTE: This is for testing purposes only.\n// To handle authentication properly,\n// see https://docs.daml.com/app-dev/authentication.html.\nexport const SECRET_KEY: string = 'secret';\n\nexport type Credentials = {\n  party: string;\n  token: string;\n  ledgerId: string;\n}\n\nfunction computeToken(party: string): string {\n  const payload = {\n    \"https://daml.com/ledger-api\": {\n      \"ledgerId\": ledgerId,\n      \"applicationId\": APPLICATION_ID,\n      \"actAs\": [party]\n    }\n  };\n  return encode(payload, SECRET_KEY, 'HS256');\n}\n\nexport const computeCredentials = (party: string): Credentials => {\n  const token = computeToken(party);\n  return {party, token, ledgerId};\n}\n\nexport default Credentials;\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useCallback } from 'react'\nimport { Button, Form, Grid, Header, Image, Segment } from 'semantic-ui-react'\nimport Credentials, { computeCredentials } from '../Credentials';\nimport Ledger from '@daml/ledger';\nimport { User } from '@daml.js/create-daml-app';\nimport { DeploymentMode, deploymentMode, ledgerId, httpBaseUrl} from '../config';\nimport { useEffect } from 'react';\n\ntype Props = {\n  onLogin: (credentials: Credentials) => void;\n}\n\n/**\n * React component for the login screen of the `App`.\n */\nconst LoginScreen: React.FC<Props> = ({onLogin}) => {\n  const [username, setUsername] = React.useState('');\n\n  const login = useCallback(async (credentials: Credentials) => {\n    try {\n      const ledger = new Ledger({token: credentials.token, httpBaseUrl});\n      let userContract = await ledger.fetchByKey(User.User, credentials.party);\n      if (userContract === null) {\n        const user = {username: credentials.party, following: []};\n        userContract = await ledger.create(User.User, user);\n      }\n      onLogin(credentials);\n    } catch(error) {\n      alert(`Unknown error:\\n${error}`);\n    }\n  }, [onLogin]);\n\n  const handleLogin = async (event: React.FormEvent) => {\n    event.preventDefault();\n    const credentials = computeCredentials(username);\n    await login(credentials);\n  }\n\n  const handleDablLogin = () => {\n    window.location.assign(`https://login.projectdabl.com/auth/login?ledgerId=${ledgerId}`);\n  }\n\n  useEffect(() => {\n    const url = new URL(window.location.toString());\n    const token = url.searchParams.get('token');\n    if (token === null) {\n      return;\n    }\n    const party = url.searchParams.get('party');\n    if (party === null) {\n      throw Error(\"When 'token' is passed via URL, 'party' must be passed too.\");\n    }\n    url.search = '';\n    window.history.replaceState(window.history.state, '', url.toString());\n    login({token, party, ledgerId});\n  }, [login]);\n\n  return (\n    <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n      <Grid.Column style={{ maxWidth: 450 }}>\n        <Header as='h1' textAlign='center' size='huge' style={{color: '#223668'}}>\n          <Header.Content>\n            Distrubuted Flight Approval\n          </Header.Content>\n        </Header>\n        <Form size='large' className='test-select-login-screen'>\n          <Segment>\n            {deploymentMode !== DeploymentMode.PROD_DABL\n            ? <>\n                {/* FORM_BEGIN */}\n                <Form.Input\n                  fluid\n                  icon='user'\n                  iconPosition='left'\n                  placeholder='Username'\n                  value={username}\n                  className='test-select-username-field'\n                  onChange={e => setUsername(e.currentTarget.value)}\n                />\n                <Button\n                  primary\n                  fluid\n                  className='test-select-login-button'\n                  onClick={handleLogin}>\n                  Log in\n                </Button>\n                {/* FORM_END */}\n              </>\n            : <Button primary fluid onClick={handleDablLogin}>\n                Log in with DABL\n              </Button>\n            }\n          </Segment>\n        </Form>\n      </Grid.Column>\n    </Grid>\n  );\n};\n\nexport default LoginScreen;\n","import React from 'react'\r\nimport { List, ListItem } from 'semantic-ui-react';\r\nimport { User } from '@daml.js/create-daml-app';\r\nimport { useStreamQuery } from '@daml/react';\r\nconst Requests: React.FC = () => {\r\n  return (\r\n    <List relaxed>\r\n      {useStreamQuery(User.Request).contracts.map(request => {\r\n        const {sender, receiver, content} = request.payload;\r\n        return (\r\n          <ListItem\r\n            className='select-request-item'\r\n            key={request.contractId}>\r\n            <strong>{sender} &rarr; {receiver}:</strong> {content}\r\n          </ListItem>\r\n        );\r\n      })}\r\n    </List>\r\n  );\r\n};\r\nexport default Requests;","import React from 'react'\r\nimport { Form, Button } from 'semantic-ui-react';\r\nimport { User } from '@daml.js/create-daml-app';\r\nimport { useParty, useLedger } from '@daml/react';\r\ntype Props = {\r\n    admins: User.User[];\r\n}\r\nconst RequestSendAndEdit: React.FC<Props> = ({admins}) => {\r\n  const sender = useParty();\r\n  const [receiver, setReceiver] = React.useState<string | undefined>();\r\n  const [content, setContent] = React.useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\r\n  const ledger = useLedger();\r\n  const submit = async (event: React.FormEvent) => {\r\n    try {\r\n      event.preventDefault();\r\n      if (receiver === undefined) {\r\n        return;\r\n      }\r\n      setIsSubmitting(true);\r\n      await ledger.exerciseByKey(User.User.SendRequest, receiver, {sender, content});\r\n      setContent(\"\");\r\n    } catch (error) {\r\n      alert(`Error sending message:\\n${JSON.stringify(error)}`);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n  return (\r\n    <Form onSubmit={submit}>\r\n      <Form.Dropdown\r\n        fluid\r\n        search\r\n        selection\r\n        className='select-request-receiver'\r\n        // If only one admin will be used the next line (and all the parts in the backend meant towards multiple admins should be removed)\r\n        placeholder=\"Select who you want to process your request\"\r\n        options={admins.map(admin => ({ key: admin.username, text: admin.username, value: admin.username }))}\r\n        value={receiver}\r\n        onChange={event => setReceiver(event.currentTarget.textContent ?? undefined)}\r\n      />\r\n      <Form.Input\r\n        className='select-request-content'\r\n        placeholder=\"Request content\"\r\n        value={content}\r\n        onChange={event => setContent(event.currentTarget.value)}\r\n      />\r\n      <Button\r\n        fluid\r\n        className='select-request-send-button'\r\n        type=\"submit\"\r\n        disabled={isSubmitting || receiver === undefined || content === \"\"}\r\n        loading={isSubmitting}\r\n        content=\"Send\"\r\n      />\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default RequestSendAndEdit;","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport { Container, Grid, Header, Icon, Segment, Divider } from 'semantic-ui-react';\nimport { User } from '@daml.js/create-daml-app';\nimport { useParty, useStreamFetchByKeys, useFetchByKey } from '@daml/react';\nimport Requests from './Requests';\nimport RequestSendAndEdit from './RequestSendAndEdit';\n\n// USERS_BEGIN\nconst MainView: React.FC = () => {\n  const username = useParty();\n  const myUserResult = useStreamFetchByKeys(User.User, () => [username], [username]);\n  const myUser = myUserResult.contracts[0]?.payload;\n  const admins = [{username: useFetchByKey(User.User, () => \"Admin\", [username]).contract?.key as string}];\n  /* Using:\n  const admins = [{username: \"Admin\"}];\n  is also possible but them we won't be sure that it exists\n  */\n\n// USERS_END\n\n  return (\n    <Container>\n      <Grid centered columns={2}>\n        <Grid.Row stretched>\n          <Grid.Column>\n            <Header as='h1' size='huge' color='blue' textAlign='center' style={{padding: '1ex 0em 0ex 0em'}}>\n                {myUser ? `Welcome, ${myUser.username}!` : 'Loading...'}\n            </Header>\n            <Segment>\n              <Header as='h2'>\n                <Icon name='pencil square' />\n                <Header.Content>\n                  Requests\n                  <Header.Subheader>Send a Request</Header.Subheader>\n                </Header.Content>\n              </Header>\n              <RequestSendAndEdit admins={admins}/>\n              <Divider />\n              <Requests />\n            </Segment>\n          </Grid.Column>\n        </Grid.Row>\n      </Grid>\n    </Container>\n  );\n}\n\nexport default MainView;","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Image, Menu } from 'semantic-ui-react'\nimport MainView from './MainView';\nimport { useParty } from '@daml/react';\n\ntype Props = {\n  onLogout: () => void;\n}\n\n/**\n * React component for the main screen of the `App`.\n */\nconst MainScreen: React.FC<Props> = ({onLogout}) => {\n  return (\n    <>\n      <Menu icon borderless>\n        <Menu.Menu position='right' className='test-select-main-menu'>\n          <Menu.Item position='right'>\n            You are logged in as {useParty()}.\n          </Menu.Item>\n          <Menu.Item\n            position='right'\n            active={false}\n            className='test-select-log-out'\n            onClick={onLogout}\n            icon='log out'\n          />\n        </Menu.Menu>\n      </Menu>\n\n      <MainView/>\n    </>\n  );\n};\n\nexport default MainScreen;\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport LoginScreen from './LoginScreen';\nimport MainScreen from './MainScreen';\nimport DamlLedger from '@daml/react';\nimport Credentials from '../Credentials';\nimport { httpBaseUrl } from '../config';\n\n/**\n * React component for the entry point into the application.\n */\n// APP_BEGIN\nconst App: React.FC = () => {\n  const [credentials, setCredentials] = React.useState<Credentials | undefined>();\n\n  return credentials\n    ? <DamlLedger\n        token={credentials.token}\n        party={credentials.party}\n        httpBaseUrl={httpBaseUrl}\n      >\n        <MainScreen onLogout={() => setCredentials(undefined)}/>\n      </DamlLedger>\n    : <LoginScreen onLogin={setCredentials} />\n}\n// APP_END\n\nexport default App;\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'semantic-ui-css/semantic.min.css';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}